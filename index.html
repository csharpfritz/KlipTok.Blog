<html>
	<head>
		<title>Latest News and Notes About KlipTok from the Official KlipTok Blog</title>
		<base href="./">
		<link rel="stylesheet" type="text/css" href="site.css">
		<link rel="stylesheet" type="text/css" href="prism.css">

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-371VNCMVCF"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'G-371VNCMVCF');
		</script>

	</head>
	<body>

		<header>
			<div class="container">
				<a href="./"><img src="kliptok.png" alt="KlipTok Logo" /></a>
				<div>
					<h1>KlipTok News and Notes</h1>
					<h3>All the latest updates about the KlipTok application</h3>
				</div>
			</div>
		</header>

		<main>

			<div id="sidebar">
				
				<h2>Links</h2>
				<ul>	
					<li><a href="https://kliptok.com">KlipTok</a></li>
					<li><a href="https://feedback.kliptok.com">KlipTok Feedback</a></li>
					<li><a href="https://github.com/csharpfritz/KlipTok.Translations">Translation Repository</a></li>
				</ul>

				<a href="https://twitter.com/thekliptok?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @thekliptok</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
		
			</div>

			<div id="main">

				<div id="content">
					<h2><a href="posts/2-IntroducingLiveIndicators.html">Most Requested Feature Deployed - Live Now on Twitch</a></h2>
<p>Over the last few months, the most requested feature on KlipTok on the <a href="https://feedback.kliptok.com">feedback site</a> has been the addition of a &quot;Live Now&quot; indicator for the list of channels.</p>
<div class="center">
<p><a href="https://feedback.kliptok.com/posts/23/live-now-icon-next-to-the-channels-name-in-the-list-of-streamers"><img src="img/feedback-LiveIndicator.png" alt="Screenshot from feedback.kliptok.com - Request to add a 'Live' indicator next to channels" /></a></p>
<p><span aria-label="caption" class="caption">Original feedback requesting the Live Indicator</span></p>
</div>
<p>On Twitch, its a simple red circle.. the circle doesn't really tell you anything, and you need to hover over it in order to see what it actually means.  On KlipTok, we want to be more inclusive and support folks that have different web usage capabilities.</p>
<p>Our 'Live Now' indicator is a red rounded square with the word 'LIVE' in the middle.  It's easy to spot and clear what it's referring to.  If you click on it, you'll be taken to their channel in a new tab of your browser.</p>
<p>You can even use the sidebar refresh buttons, the spinning arrows next to the titles in the sidebar, to refresh the list of current channels that KlipTok has for you and it will update the Live status appropriately as well.</p>
<div class="center">
<p><img src="img/liveIndicator.png" alt="Screenshot of KlipTok showing the new LIVE indicator in the sidebar" /></p>
<p><span aria-label="caption" class="caption">Implementation of the Live Indicator on KlipTok</span></p>
</div>
<h2 id="behind-the-feature-how-does-it-work">Behind the feature - How does it work?</h2>
<p>As more of KlipTok is built, we're going to use this as an opportunity to <strong>TEACH</strong> more about how to build websites and the features behind them.  Going forward, look for descriptions about the KlipTok architecture, but not all of our secrets, whenever a new feature is released.</p>
<h3 id="getting-the-live-status-from-twitch">Getting the Live Status from Twitch</h3>
<p>The <a href="https://dev.twitch.tv/docs/api/reference#get-streams">Twitch APIs</a> make it easy to run a query to collect the current state of a stream.  When KlipTok's background processes run to discover newly created clips, they inspect the list of currently active streams and ONLY search those streams for new clips.  We know that more than 95% of the clips that are created for a stream are created while the broadcaster is actively streaming, so we focus on collecting those clips as they are created.  Once an hour, we examine ALL channels that KlipTok has indexed.</p>
<p>Since we were collecting this data about the active streams in order to filter the list of channels that the KlipTok processes were searching against, why not save that information and present it to the KlipTok users as they use the site?  Easy enough... we created a <code>LiveChannels</code> table and stored the id of the channels that are currently streaming.</p>
<p>I wrote a method on our <code>LiveChannelsRepository</code> class that would <code>Replace</code> the current contents of the table with the collection of the live channels we discovered.  It's crude, but it works.</p>
<pre><code class="language-csharp">	await _LiveChannelsRepository.Replace(
		liveChannels.Select(l => new Twitch.TwitchStreamRecord
		{
			user_id = l.ChannelId,
			started_at = l.LiveSince
		})
	);</code></pre>
<p>When we assemble the sidebar for a user, we include the <code>LiveChannels</code> table in the query and present the Live Indicator when a record is present in the <code>LiveChannels</code> table for the channel in the sidebar.</p>
<h2 id="summary">Summary</h2>
<p>Adding this feature was a great re-use of existing data that KlipTok was already working with, and feels almost like re-using content with no additional cost to us.  Stay tuned as we add new Search features, clip metadata, and launch the Top 5 Klips of the Week in August.</p>

<h2><a href="posts/1-WelcomeToKlipTok.html">Welcome to KlipTok!</a></h2>
<p>This is our first post on the KlipTok blog, and I'm thrilled to have this live for folks to learn more about how KlipTok is built and to allow us to announce new features as well as milestones reached.  I'll have a few more posts today and later this week talking about what KlipTok is, how it was built, and how you can participate.</p>
<h2 id="how-it-started">How it started</h2>
<p>KlipTok has been built by a Twitch Streamer, for Twitch Streamers, LIVE on Twitch.  It started in November 2020 as an idea to help make Twitch clips more discoverable with a UI that brought your favorite clips from the channels you follow.  That 12-hour stream is archived and available:</p>
<div style="width: 100%; text-align: center;">
<iframe width="560" height="315"  src="https://www.youtube.com/embed/6uMCAHEM8Es?start=310" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
<p>The technical goal of this web application was to build a complete site using the <a href="https://blazor.net">Blazor web framework</a> with <a href="https://dot.net">C# and .NET 5</a> running completely on <a href="https://azure.microsoft.com">Microsoft Azure</a>.  We use Azure Static Websites to make that happen along with a number of other Microsoft Azure services, and we'll cover more of that in an upcoming blog post.</p>
<h2 id="fast-forward-to-today">Fast Forward to Today</h2>
<p>At the time of the writing of this blog post (at the end of July 2021), we're about 8 months into the evolution of the site and it hosts about 680 channels clips.  There are more than 3.1 million clips that KlipTok has indexed and are available for you to discover.</p>
<p>We've added the ability for the site to be translated to a number of different languages with the help of our KlipTok community.  The translations are all available in JSON format <a href="https://github.com/csharpfritz/KlipTok.Translations">on GitHub</a> and you are welcome to contribute new or missing translations.</p>
<p>Viewer and user feedback is VERY important to me in the construction of KlipTok, and I've configured a user feedback website using <a href="https://getfider.com">Fider</a>.  You can see the requested features and my notes about the next features that are going to be built at <a href="https://feedback.kliptok.com">https://feedback.kliptok.com</a></p>
<p>I'm writing a handful of posts to get things started here to describe some of the direction behind the site, the tenets we follow as development progresses, and the Azure-based architecture used.</p>
<p>I hope to separate the Blazor application into its own repository and release the UI as an open source project before the end of July 2021.  In this way, you can learn from how the application was written and even contribute back some updates to improve the user-interface.</p>
<h2 id="one-more-thing">One more thing...</h2>
<p>I've added an amazing feature to KlipTok with the help of the folks at <a href="https://assemblyai.com">Assembly AI</a> to provide transcription for clips.  This means you can search for clips based on what was SAID in the clip, not just the title of the clip.  This is the ONLY video sharing service on the internet that provides this service, and we have much more planned with our friends at Assembly AI.</p>
<h2 id="summary">Summary</h2>
<p>So.. welcome to KlipTok!  I'm looking forward to building much more for this web application and learning about how to use many more cloud services and taking advantage of the coolest new .NET technologies to grow it and make it an application you find useful.</p>


				</div>
			</div>

		</main>

		<footer>Copyright &copy;2021 Jeffrey T. Fritz</footer>

		<script src="prism.js"></script>
	</body>
</html>
